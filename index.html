






















<!DOCTYPE html>

<html lang="mn">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>–•—è—Ç–∞–¥, –ê–∑–∏, Global eSIM ‚Äì 2000‚ÇÆ-—Å | eSIM Mongolia</title>
    <script data-noptimize="1" data-cfasync="false" data-wpfc-render="false">
  (function () {
      var script = document.createElement("script");
      script.async = 1;
      script.src = 'https://emrld.ltd/NTAxMDMx.js?t=501031';
      document.head.appendChild(script);
  })();
</script>
<meta content="–ú–æ–Ω–≥–æ–ª—á—É—É–¥—ã–Ω –≥–∞–¥–∞–∞–¥ –∞—è–ª–∞–ª–¥ –∑–æ—Ä–∏—É–ª—Å–∞–Ω eSIM “Ø–π–ª—á–∏–ª–≥—ç—ç. –•—è—Ç–∞–¥, –ê–∑–∏, Global eSIM 2000‚ÇÆ-—Å. QR –∫–æ–¥–æ–æ—Ä 1 –º–∏–Ω—É—Ç–∞–Ω–¥ —Ö–æ–ª–±–æ–≥–¥–æ–Ω–æ. " name="description"/>
<style>
    :root{
      --bg:#f6f7fb; --card:#ffffff; --text:#111827; --muted:#6b7280;
      --brand:#10b981; --border:#e5e7eb;
      --shadow:0 12px 40px rgba(0,0,0,.12);
      --r:18px;
    }
    *{ box-sizing:border-box; }
    body{ margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; background:var(--bg); color:var(--text); }
    a{ color:inherit; }
    .wrap{ max-width:1100px; margin:0 auto; padding:16px; }
    .nav{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px 0; }
    .right{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      border:1px solid var(--border); background:#fff; color:var(--text);
      padding:10px 12px; border-radius:12px; font-weight:900; cursor:pointer;
      text-decoration:none;
    }
    .btn.primary{ background:var(--brand); border-color:var(--brand); color:#fff; }
    .pill{
      border:1px solid var(--border); background:#fff; padding:8px 10px; border-radius:999px;
      font-weight:900; cursor:pointer;
    }
    .pill.active{ background:var(--brand); color:#fff; border-color:var(--brand); }
    h1{ font-size:22px; margin:14px 0 6px; }
    h2{ font-size:18px; margin:18px 0 10px; }
    .sub{ color:var(--muted); font-size:13px; line-height:1.5; }
    .controls{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin:12px 0 10px; }
    .search{ width:min(420px, 78vw); border:1px solid var(--border); border-radius:12px; padding:10px 12px; }
    .select{ border:1px solid var(--border); border-radius:12px; padding:10px 12px; background:#fff; font-weight:900; }

    .grid{ display:grid; grid-template-columns:repeat(3, 1fr); gap:12px; }
    .card{
      background:var(--card); border:1px solid var(--border); border-radius:var(--r);
      padding:14px; box-shadow:0 1px 0 rgba(0,0,0,.02);
    }
    .cardHead{ display:flex; justify-content:space-between; gap:10px; align-items:flex-start; }
    .name{ font-weight:900; }
    .note{ margin-top:10px; font-size:13px; }

    .featuredGrid{ display:grid; grid-template-columns:repeat(3, 1fr); gap:14px; }
    .featuredCard{ background:var(--card); border:1px solid var(--border); border-radius:var(--r); padding:14px; box-shadow:var(--shadow); }
    .featuredCard h3{ margin:10px 0 4px; font-size:16px; }
    .imgWrap img{ width:100%; height:160px; object-fit:cover; border-radius:14px; display:block; }

    details{ background:var(--card); border:1px solid var(--border); border-radius:14px; padding:12px 14px; }
    summary{ cursor:pointer; font-weight:900; }

    .footer{ margin-top:22px; background:#0b1220; color:#e5e7eb; border-radius:18px; padding:18px; }
    .footer a{ color:#e5e7eb; }

    /* Modal */
   /* Modal (FULL scroll - –∑”©–≤ —Ö—É–≤–∏–ª–±–∞—Ä) */
.bd{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:none;
  z-index:99998;
}

.md{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%, -50%);
  width:min(640px,92vw);
  max-height:92vh;
  background:#fff;
  border-radius:18px;
  box-shadow:var(--shadow);
  display:none;
  z-index:99999;
  overflow:hidden; /* scroll-–≥ body –¥—ç—ç—Ä ”©–≥–Ω”© */
}

.md header{
  padding:14px 16px;
  border-bottom:1px solid #eef2f7;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
}

.close{
  border:0;
  background:transparent;
  font-size:22px;
  cursor:pointer;
  color:var(--muted);
}

.md .body{
  padding:14px 16px;
  line-height:1.65;

  /* ‚úÖ –¢–æ–º —Ü–æ–Ω—Ö–æ–Ω –¥—ç—ç—Ä scroll */
  max-height:calc(92vh - 70px);
  overflow-y:auto;
  -webkit-overflow-scrolling: touch;
}

.actions{
  display:flex;
  gap:10px;
  justify-content:flex-end;
  margin-top:12px;
  flex-wrap:wrap;
}

    /* Toast */
    .toast{
      position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
      background:#111827; color:#fff; padding:10px 12px; border-radius:12px;
      box-shadow:0 10px 26px rgba(0,0,0,.25);
      display:none; z-index:100000;
      font-weight:800; font-size:13px;
    }

    @media (max-width: 980px){
      .grid{ grid-template-columns:1fr; }
      .featuredGrid{ grid-template-columns:1fr; }
      .imgWrap img{ height:170px; }
    }
  

    /* Install guide */
    .installGrid{ display:grid; grid-template-columns:repeat(2, 1fr); gap:12px; }
    .installCard{ background:var(--card); border:1px solid var(--border); border-radius:14px; padding:12px; }
    .installImg{ width:100%; height:180px; object-fit:cover; border-radius:12px; display:block; }
    .installList{ padding-left:18px; margin:0; color:var(--text); }
    @media (max-width: 900px){
      .installGrid{ grid-template-columns:1fr; }
    }

    /* ===== QPay Box (no inner scroll; modal body scrolls) ===== */
    #qpayBox{ max-height:none; overflow:visible; padding-right:0; }
    #qpayBox img{ max-width:100%; height:auto; }
</style>
</head>
<body>
<div class="wrap">
<div class="nav">
<!-- Navbar Logo: eSIMMongolia Page (ID –∞—à–∏–≥–ª–∞—Å–∞–Ω) -->
<a href="https://www.facebook.com/profile.php?id=61587287992719" style="display:flex;align-items:center;gap:10px;text-decoration:none;color:inherit;font-weight:900;letter-spacing:.2px" target="_blank">
<img alt="eSIMMongolia" src="https://graph.facebook.com/61587287992719/picture?type=large" style="width:40px;height:40px;border-radius:50%;object-fit:cover"/>
<span>eSIM Mongolia</span>
</a>
<div class="right">
<span class="sub" style="font-weight:900">üìû 90283039</span>
<a class="btn" href="#pricing">“Æ–Ω—ç</a>
<a class="btn" href="#faq">FAQ</a>
    <a class="btn" href="flights.html">‚úàÔ∏è –ù–∏—Å–ª—ç–≥</a>
<a class="btn" href="hotels.html">üè® –ë—É—É–¥–∞–ª</a>
  <a class="btn" href="/marshrut.html">–ú–∞—Ä—à—Ä—É—Ç</a>
<button class="btn primary" id="quickChinaBtn" type="button">üá®üá≥ China</button>
</div>
</div>
<h1>–ê—è–ª–ª—ã–Ω eSIM ‚Äî —É–ª—Å–∞–∞ —Å–æ–Ω–≥–æ–æ–¥ –¥–∞—Ç–∞/—Ö—É–≥–∞—Ü–∞–∞–≥–∞–∞ —Å–æ–Ω–≥–æ</h1>
<div class="sub">
      –¢–∞ –∞—è–ª ‚Äî –±–∏–¥—ç–Ω–¥ –¥–∞—Ç–∞–≥aa –¥–∞–∞—Ç–≥–∞. <b>eSIMMongolia</b> —Ç–∞–Ω—å—Ç–∞–π —Ö–∞–º—Ç, —Ç–∞–Ω—ã —Ö—ç—Ä—ç–≥–ª—ç—ç–≥ —Ç–∞—Å—Ä–∞–ª—Ç–≥“Ø–π —Ö–∞–Ω–≥–∞–Ω–∞.<br/>
      ‚úàÔ∏è –≠–¥–≥—ç—ç—Ä —É–ª—Å—É—É–¥ —Ä—É—É –∞—è–ª–∞—Ö—ã–≥ —Ö“Ø—Å–≤—ç–ª <b><a href="https://www.facebook.com/chukatravel" target="_blank">ChukaTravel</a></b> page —Ä—É—É —Ö–∞–Ω–¥–∞–Ω–∞ —É—É.
    </div>
<!-- ‚≠ê Featured (3 images - online URLs) -->
<h2>‚≠ê –û–Ω—Ü–ª–æ—Ö –±–∞–≥—Ü—É—É–¥</h2>
<div class="featuredGrid">
<div class="featuredCard">
<div class="imgWrap">
<img alt="China eSIM" loading="lazy" src="https://images.unsplash.com/photo-1549692520-acc6669e2f0c?auto=format&amp;fit=crop&amp;w=1200&amp;q=80"/>
</div>
<h3>üá®üá≥ –•—è—Ç–∞–¥ eSIM</h3>
<p class="sub">Facebook, Google VPN-–≥“Ø–π (HK routed)</p>
<a class="btn primary" href="/china-esim.html">–ë–∞–≥—Ü—ã–Ω –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π</a>
</div>
<div class="featuredCard">
<div class="imgWrap">
<img alt="Asia eSIM" loading="lazy" src="https://images.unsplash.com/photo-1500835556837-99ac94a94552?auto=format&amp;fit=crop&amp;w=1200&amp;q=80"/>
</div>
<h3>üåè Asia (10 —É–ª—Å)</h3>
<p class="sub">–ê–∑–∏–π–Ω 10 —É–ª—Å–∞–¥ –∞–∂–∏–ª–ª–∞–Ω–∞</p>
<a class="btn primary" href="/asia-esim.html">–ë–∞–≥—Ü—ã–Ω –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π</a>
</div>
<div class="featuredCard">
<div class="imgWrap">
<img alt="Global eSIM" loading="lazy" src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&amp;fit=crop&amp;w=1200&amp;q=80"/>
</div>
<h3>üåç Global (66 —É–ª—Å)</h3>
<p class="sub">–î—ç–ª—Ö–∏–π–Ω 66 —É–ª—Å–∞–¥ –∞–∂–∏–ª–ª–∞–Ω–∞</p>
<a class="btn primary" href="/global-esim.html">–ë–∞–≥—Ü—ã–Ω –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π</a>
</div>
</div>
<!-- Pricing -->
<h2 id="pricing">üåç –£–ª—Å / –ë“Ø—Å —Å–æ–Ω–≥–æ–æ–¥ “Ø–Ω—ç –±–æ–¥–æ–æ—Ä–æ–π</h2>
<div class="controls">
<input class="search" id="q" placeholder="–£–ª—Å —Ö–∞–π—Ö‚Ä¶ (Japan, Europe, USA, Global –≥—ç—Ö –º—ç—Ç)"/>
<select class="select" id="days"></select>
<button class="btn" id="clear" type="button">Clear</button>
</div>
<div class="grid" id="grid"></div>
<!-- FAQ -->

<section class="card" id="install" style="margin-top:16px">
<h2 style="margin-top:0">üì± eSIM —Å—É—É–ª–≥–∞—Ö –∑–∞–∞–≤–∞—Ä</h2>
<div class="sub">QR –∫–æ–¥–æ–æ –∞–≤–º–∞–≥—Ü 2‚Äì3 –º–∏–Ω—É—Ç—ã–Ω –¥–æ—Ç–æ—Ä —Å—É—É–ª–≥–∞–Ω–∞. Wi‚ÄëFi –±–∞–π—Ö “Ø–µ–¥—ç—ç —Å—É—É–ª–≥–∞–∞—Ä–∞–π.</div>
<div class="installGrid" style="margin-top:14px">
<div class="installCard">
<img alt="iPhone eSIM install" class="installImg" loading="lazy" src="https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?auto=format&amp;fit=crop&amp;w=1200&amp;q=80"/>
<h3 style="margin:12px 0 8px">üçé iPhone</h3>
<ol class="installList">
<li>Settings ‚Üí Cellular (Mobile Data)</li>
<li>Add eSIM / Add Cellular Plan</li>
<li>Use QR Code ‚Üí QR –∫–æ–¥ —É–Ω—à—É—É–ª–Ω–∞</li>
<li>Cellular Data = eSIM –≥—ç–∂ —Å–æ–Ω–≥–æ–Ω–æ</li>
</ol>
</div>
<div class="installCard">
<img alt="Android eSIM install" class="installImg" loading="lazy" src="https://images.unsplash.com/photo-1598327105666-5b89351aff97?auto=format&amp;fit=crop&amp;w=1200&amp;q=80"/>
<h3 style="margin:12px 0 8px">ü§ñ Android</h3>
<ol class="installList">
<li>Settings ‚Üí Network &amp; Internet</li>
<li>SIMs / SIM manager ‚Üí Add eSIM</li>
<li>Scan QR code ‚Üí QR –∫–æ–¥ —É–Ω—à—É—É–ª–Ω–∞</li>
<li>Mobile data-–≥ eSIM –¥—ç—ç—Ä –∞—Å–∞–∞–Ω–∞</li>
</ol>
</div>
</div>
<div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
<a class="btn primary" href="https://esimmongolia.com/?plan=cn">–•—è—Ç–∞–¥ “Ø–Ω—ç –±–æ–¥–æ—Ö</a>
<a class="btn" href="https://esimmongolia.com/?plan=asia10">Asia “Ø–Ω—ç –±–æ–¥–æ—Ö</a>
<a class="btn" href="https://esimmongolia.com/?plan=global66">Global “Ø–Ω—ç –±–æ–¥–æ—Ö</a>
</div>
</section>
<h2 id="faq">FAQ</h2>
<div style="display:grid; gap:10px;">
<details>
<summary>–•—è—Ç–∞–¥ eSIM “Ø–Ω—ç—Ö—ç—ç—Ä Facebook/Google –Ω—ç—ç—Ö “Ø“Ø?</summary>
<div class="sub" style="margin-top:8px">
          ‚Äú–•—è—Ç–∞–¥‚Äù –¥—ç—ç—Ä —Ç—ç–º–¥—ç–≥–ª—ç—Å—ç–Ω HK routed –±–∞–≥—Ü –±–æ–ª VPN-–≥“Ø–π –Ω—ç—ç—Ö –±–æ–ª–æ–º–∂—Ç–æ–π. –≠—Ü—Å–∏–π–Ω –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–∞–ª—Ç—ã–≥ —á–∞—Ç–∞–∞—Ä —Ö–∏–π–Ω—ç.
        </div>
</details>
<details>
<summary>“Æ–ô–õ–ß–ò–õ–ì–≠–≠–ù–ò–ô –ù”®–•–¶”®–õ

–ï—Ä”©–Ω—Ö–∏–π –∑“Ø–π–ª

–≠–Ω—ç—Ö“Ø“Ø “Ø–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π –Ω”©—Ö—Ü”©–ª –Ω—å esimmongolia –≤—ç–± —Å–∞–π—Ç–∞–∞—Ä –¥–∞–º–∂—É—É–ª–∞–Ω eSIM “Ø–π–ª—á–∏–ª–≥—ç—ç –∞–≤–∞—Ö—Ç–∞–π —Ö–æ–ª–±–æ–æ—Ç–æ–π —Ö—ç—Ä—ç–≥–ª—ç–≥—á –±–æ–ª–æ–Ω amarsim.mn –≤—ç–± —Å–∞–π—Ç —Ö–æ–æ—Ä–æ–Ω–¥—ã–Ω —Ö–∞—Ä–∏–ª—Ü–∞–∞–≥ –∑–æ—Ö–∏—Ü—É—É–ª–Ω–∞. –•—ç—Ä—ç–≥–ª—ç–≥—á eSIM “Ø–π–ª—á–∏–ª–≥—ç—ç–≥ –∞–≤–∞—Ö—ã–Ω ”©–º–Ω”© —ç–Ω—ç—Ö“Ø“Ø –ù”©—Ö—Ü”©–ª–∏–π–≥ –∞–Ω—Ö–∞–∞—Ä–∞–ª—Ç–∞–π —É–Ω—à–∏–∂, –∑”©–≤—à”©”©—Ä—Å”©–Ω –±–∞–π–Ω–∞. –í—ç–± —Å–∞–π—Ç–∞–∞—Ä “Ø–π–ª—á–∏–ª–≥—ç—ç –∞–≤–∞—Ö, –∑–∞—Ö–∏–∞–ª–≥–∞ ”©–≥”©—Ö, —ç—Å–≤—ç–ª eSIM –∏–¥—ç–≤—Ö–∂“Ø“Ø–ª—ç—Ö –Ω—å —É–≥  –Ω”©—Ö—Ü”©–ª–∏–π–≥ —Ö“Ø–ª—ç—ç–Ω –∑”©–≤—à”©”©—Ä—Å–Ω–∏–π–≥ –∏–ª—ç—Ä—Ö–∏–π–ª–Ω—ç.

1. eSIM “Ø–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π —Ç–æ–¥–æ—Ä—Ö–æ–π–ª–æ–ª—Ç

eSIM –Ω—å –±–∏–µ—Ç SIM –∫–∞—Ä—Ç —à–∞–∞—Ä–¥–ª–∞–≥–∞–≥“Ø–π, –¥–∏–∂–∏—Ç–∞–ª —Ö—ç–ª–±—ç—Ä–∏–π–Ω SIM –∫–∞—Ä—Ç –±”©–≥”©”©–¥ –≤—ç–± —Å–∞–π—Ç–∞–∞—Ä –¥–∞–º–∂—É—É–ª–∞–Ω QR –∫–æ–¥ –∞—à–∏–≥–ª–∞–Ω –≥–∞–¥–∞–∞–¥ —É–ª—Å–∞–¥ –¥–∞—Ç–∞ “Ø–π–ª—á–∏–ª–≥—ç—ç –∞—à–∏–≥–ª–∞—Ö –±–æ–ª–æ–º–∂–∏–π–≥ –æ–ª–≥–æ–¥–æ–≥ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏ —é–º.
eSIM “Ø–π–ª—á–∏–ª–≥—ç—ç –Ω—å –≥–∞–¥–∞–∞–¥ —É–ª—Å–∞–¥ –¥–∞—Ç–∞ –∞—à–∏–≥–ª–∞—Ö (2G/3G/4G/5G) “Ø–π–ª—á–∏–ª–≥—ç—ç–≥ —Ö–∞–º–∞—Ä–Ω–∞.
eSIM-–≥ –∑”©–≤—Ö”©–Ω eSIM —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π–≥ –¥—ç–º–∂–¥—ç–≥ —Ç”©—Ö”©”©—Ä”©–º–∂ –¥—ç—ç—Ä (–∂–∏—à—ç—ç: iPhone XS –±–∞ —Ç“Ø“Ø–Ω—ç—ç—Å —Ö–æ–π—à, Samsung Galaxy S20 –±–∞ —Ç“Ø“Ø–Ω—ç—ç—Å —Ö–æ–π—à) –∞—à–∏–≥–ª–∞–Ω–∞.
2. “Æ–π–ª—á–∏–ª–≥—ç—ç –∞–≤–∞—Ö–∞–¥ —Ç–∞–≤–∏–≥–¥–∞—Ö —à–∞–∞—Ä–¥–ª–∞–≥–∞

2.1. –¢”©—Ö”©”©—Ä”©–º–∂–∏–π–Ω –Ω–∏–π—Ü—Ç—ç–π –±–∞–π–¥–∞–ª: –•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω —É—Ç–∞—Å eSIM-–≥ –¥—ç–º–∂–¥—ç–≥ –±–∞–π—Ö —ë—Å—Ç–æ–π. –®–∞–ª–≥–∞—Ö—ã–Ω —Ç—É–ª–¥ *#06# –¥—É–≥–∞–∞—Ä—Ç –∑–∞–ª–≥–∞–∂, EID –∫–æ–¥ –≥–∞—Ä—á –∏—Ä–≤—ç–ª —Ç—É—Ö–∞–π–Ω —É—Ç–∞—Å eSIM-–≥ –¥—ç–º–∂–¥—ç–≥ –≥—ç–¥–≥–∏–π–Ω —Ö–∞—Ä—É—É–ª–Ω–∞.
2.2. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Ö–æ–ª–±–æ–ª—Ç: eSIM –∏–¥—ç–≤—Ö–∂“Ø“Ø–ª—ç—Ö—ç–¥ Wi-Fi —Ö–æ–ª–±–æ–ª—Ç —ç—Å–≤—ç–ª —É—Ç–∞—Å–Ω—ã—Ö–∞–∞ –¥–∞—Ç–∞ —Ö–æ–ª–±–æ–ª—Ç—ã–≥ –∏–¥—ç–≤—Ö–∏–∂“Ø“Ø–ª—Å—ç–Ω –±–∞–π—Ö—à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π.
2.3. –ë“Ø—Ä—Ç–≥—ç–ª: –•—ç—Ä—ç–≥–ª—ç–≥—á esimmongolia –≤—ç–± —Å–∞–π—Ç–∞–¥ –±“Ø—Ä—Ç–≥“Ø“Ø–ª—Å—ç–Ω—ç—ç—Ä —Ç—É—Å “Ø–π–ª—á–∏–ª–≥—ç—ç–≥ –∞—à–∏–≥–ª–∞—Ö –±–æ–ª–æ–º–∂—Ç–æ–π –±–æ–ª–Ω–æ. 

3. –•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω “Ø“Ø—Ä—ç–≥

–¢–∞–Ω—å–¥ –∏–ª–≥—ç—ç—Å—ç–Ω –¥–∞—Ç–∞ “Ø–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π QR –∫–æ–¥—ã–≥ –±—É—Å–∞–¥—Ç–∞–π —Ö—É–≤–∞–∞–ª—Ü–∞—Ö–≥“Ø–π, –Ω—É—É—Ü–ª–∞–ª—ã–≥ —Ö–∞–¥–≥–∞–ª–Ω–∞.
–•—É–≤–∏–π–Ω –º—ç–¥—ç—ç–ª–ª–∏–π–≥ “Ø–Ω—ç–Ω –∑”©–≤ –æ—Ä—É—É–ª—Å–∞–Ω–∞–∞—Ä —Ç–∞–Ω—å–¥ –≥–∞–¥–∞–∞–¥–∞–¥ –∞—à–∏–≥–ª–∞—Ö –¥–∞—Ç–∞ –∏-—Å–∏–º–Ω–∏–π –º—ç–¥—ç—ç–ª—ç–ª “Ø–Ω—ç–Ω –∑”©–≤ –æ—á–∏—Ö –±–æ–ª–æ–º–∂—Ç–æ–π –≥—ç–¥–≥–∏–π–≥ –∞–Ω—Ö–∞–∞—Ä–Ω–∞ —É—É 
eSIM –∏–¥—ç–≤—Ö–∂“Ø“Ø–ª—ç—Ö—ç–¥ —Ç–∞–Ω—ã –≥–∞—Ä —É—Ç–∞—Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Ö–æ–ª–±–æ–ª—Ç—Ç–æ–π /Wifi —Ö–æ–ª–±–æ–ª—Ç —ç—Å–≤—ç–ª –≥–∞—Ä —É—Ç–∞—Å–Ω—ã –¥–∞—Ç–∞–≥ –∏–¥—ç–≤—Ö–∏–∂“Ø“Ø–ª—Å—ç–Ω/ –±–∞–π—Ö —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π.
–•—É–¥–∞–ª–¥–∞–Ω –∞–≤—Å–∞–Ω eSIM-–∏–π–Ω —Ö“Ø—á–∏–Ω—Ç—ç–π —Ö—É–≥–∞—Ü–∞–∞ –¥—É—É—Å—Å–∞–Ω —ç—Å–≤—ç–ª —Ö—ç—Ä—ç–≥–ª—ç—ç–≥“Ø–π “Ø–ª–¥—ç–≥–¥—ç–ª–¥ –±—É—Ü–∞–∞–Ω –æ–ª–≥–æ–ª—Ç —Ö–∏–π–≥–¥—ç—Ö–≥“Ø–π.
–•—ç—Ä—ç–≥–ª—ç–≥—á —É—Ç–∞—Å–Ω–∞–∞—Å–∞–∞ QR –∫–æ–¥ —É—Å—Ç–≥–∞—Ö, –¥–∞—Ö–∏–Ω —Å—É—É–ª–≥–∞—Ö –±–æ–ª–æ–º–∂–≥“Ø–π –±–æ–ª–≥–æ—Ö, eSIM-–∏–π–≥ –±—É—Ä—É—É —Ç”©—Ö”©”©—Ä”©–º–∂ –¥—ç—ç—Ä –∏–¥—ç–≤—Ö–∂“Ø“Ø–ª—ç—Ö —Ç–æ—Ö–∏–æ–ª–¥–æ–ª–¥ –±—É—Ü–∞–∞–Ω –æ–ª–≥–æ–ª—Ç —Ö–∏–π—Ö –±–æ–ª–æ–º–∂–≥“Ø–π
–•—ç—Ä—ç–≥–ª—ç–≥—á —Å–∏–º—ç—ç –∞—à–∏–≥–ª–∞–∂ —ç—Ö—ç–ª—Å—ç–Ω —Ç–æ—Ö–∏–æ–ª–¥–æ–ª–¥ –±—É—Ü–∞–∞–Ω –æ–ª–≥–æ–ª—Ç —Ö–∏–π–≥–¥—ç—Ö –±–æ–ª–æ–º–∂–≥“Ø–π
4. “Æ–π–ª—á–∏–ª–≥—ç—ç “Ø–∑“Ø“Ø–ª—ç–≥—á–∏–π–Ω —Ö–∞—Ä–∏—É—Ü–ª–∞–≥–∞

–î–∞—Ç–∞ —Å–∏–º –∞—à–∏–≥–ª–∞—Ö QR –∫–æ–¥—ã–≥ —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω –±“Ø—Ä—Ç–≥“Ø“Ø–ª—Å—ç–Ω –∏–º—ç–π–ª —Ö–∞—è–≥ —Ä—É—É —ç—Å–≤—ç–ª QR –∫–æ–¥—ã–Ω –ª–∏–Ω–∫–∏–π–≥ —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω –±“Ø—Ä—Ç–≥“Ø“Ø–ª—Å—ç–Ω –≥–∞—Ä —É—Ç–∞—Å —Ä—É—É –∏–ª–≥—ç—ç–Ω—ç.
eSIM “Ø–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π —Ç–∞—Å—Ä–∞–ª—Ç–≥“Ø–π, –Ω–∞–π–¥–≤–∞—Ä—Ç–∞–π –∞–∂–∏–ª–ª–∞–≥–∞–∞–≥ —Ö–∞–Ω–≥–∞–Ω–∞.
–•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω —Ö—É–≤–∏–π–Ω –º—ç–¥—ç—ç–ª–ª–∏–π–Ω –Ω—É—É—Ü–ª–∞–ª—ã–≥ –ú–æ–Ω–≥–æ–ª –£–ª—Å—ã–Ω —Ö—É—É–ª—å —Ç–æ–≥—Ç–æ–æ–º–∂–∏–π–Ω –¥–∞–≥—É—É —Ö–∞–º–≥–∞–∞–ª–Ω–∞.
–í—ç–± —Å–∞–π—Ç—ã–Ω –º—ç–¥—ç—ç–ª—ç–ª, “Ø–Ω—ç,, —Ö—É–≥–∞—Ü–∞–∞–Ω—ã “Ø–Ω—ç–Ω –∑”©–≤ –±–∞–π–¥–ª—ã–≥ —Ö–∞—Ä–∏—É—Ü–Ω–∞.
5. –ù—É—É—Ü–ª–∞–ª –±–∞ –∞—é—É–ª–≥“Ø–π –±–∞–π–¥–∞–ª

–•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω –∏–º—ç–π–ª —Ö–∞—è–≥, –≥–∞—Ä —É—Ç–∞—Å–Ω—ã –¥—É–≥–∞–∞—Ä, —Ç”©–ª–±”©—Ä–∏–π–Ω –º—ç–¥—ç—ç–ª–ª–∏–π–≥ –∑”©–≤—Ö”©–Ω “Ø–π–ª—á–∏–ª–≥—ç—ç “Ø–∑“Ø“Ø–ª—ç—Ö –∑–æ—Ä–∏–ª–≥–æ–æ—Ä –∞—à–∏–≥–ª–∞–Ω–∞.
–í—ç–± —Å–∞–π—Ç –Ω—å –∑”©–≤—à”©”©—Ä”©–ª–≥“Ø–π —Ö–∞–Ω–¥–ª–∞–≥–∞–∞—Å —Ö–∞–º–≥–∞–∞–ª–∞–≥–¥—Å–∞–Ω –±”©–≥”©”©–¥ —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω –º—ç–¥—ç—ç–ª–ª–∏–π–Ω –∞—é—É–ª–≥“Ø–π –±–∞–π–¥–ª—ã–≥ —Ö–∞–Ω–≥–∞–Ω–∞.
6. –°–∞–Ω–∞–ª –≥–æ–º–¥–æ–ª

–•—ç—Ä—ç–≥–ª—ç–≥—á “Ø–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π —Ç–∞–ª–∞–∞—Ä —Å–∞–Ω–∞–ª, –≥–æ–º–¥–ª–æ–æ  esimmongolia, 90283039 –¥—É–≥–∞–∞—Ä—Ç —Ö–æ–ª–±–æ–≥–¥–æ—Ö —ç—Å–≤—ç–ª  WhatsApp  “Ø–π–ª—á–∏–ª–≥—ç—ç–≥—ç—ç—Ä –∏–ª–≥—ç—ç–Ω—ç.
7. –•–æ–ª–±–æ–æ –±–∞—Ä–∏—Ö

–õ–∞–≤–ª–∞—Ö –¥—É–≥–∞–∞—Ä: +976-90283039
–í—ç–±—Å–∞–π—Ç: esimmongolia.com</summary>
<div class="sub" style="margin-top:8px">
<b>‚Äú–•—è—Ç–∞–¥ —è–≤–∞—Ö —É—É? Facebook, Google VPN-–≥“Ø–π ‚Äî QR –∫–æ–¥ 5 –º–∏–Ω—É—Ç–∞–Ω–¥.‚Äù</b>
</div>
</details>
</div>
<div class="footer">
<div style="font-weight:900;font-size:16px">eSIMMongolia</div>
<div style="opacity:.9;margin-top:6px">üìû –•–æ–ª–±–æ–æ –±–∞—Ä–∏—Ö: <b>90283039</b></div>
<div style="opacity:.9;margin-top:8px">
        ‚úàÔ∏è –•—è—Ç–∞–¥, –¢–∞–π–ª–∞–Ω–¥, –Ø–ø–æ–Ω, –°–æ–ª–æ–Ω–≥–æ—Å –±–æ–ª–æ–Ω –±—É—Å–∞–¥ —É–ª—Å —Ä—É—É –∞—è–ª–∞—Ö –±–æ–ª üëâ
        <a href="https://www.facebook.com/chukatravel" target="_blank"><b>ChukaTravel Facebook Page</b></a>
</div>
    <div style="opacity:.9;margin-top:8px">
<a href="privacy.html">Privacy Policy</a> |
<a href="terms.html">Terms of Service</a> |
<a href="about.html">About Us</a>
</div>
<div style="opacity:.75;margin-top:10px">¬© 2026 eSIMMongolia</div>
</div>
<!-- Toast -->
<div class="toast" id="toast">–•—É—É–ª–ª–∞–∞ ‚úÖ</div>
<!-- Modal -->
<div class="bd" id="bd"></div>
<div aria-modal="true" class="md" id="md" role="dialog">
<header>
<b id="ttl">“Æ–Ω–∏–π–Ω —Å–∞–Ω–∞–ª</b>
<button aria-label="Close" class="close" id="x" type="button">√ó</button>
</header>
<div class="body">
<div id="out"></div>
<!-- Data selector -->
<div style="margin-top:12px">
<div class="sub" style="margin-bottom:8px">–î–∞—Ç–∞ —Å–æ–Ω–≥–æ—Ö</div>
<div id="dataChips" style="display:flex;gap:8px;flex-wrap:wrap">
<button class="pill" data-plan="1" type="button">1GB</button>
<button class="pill" data-plan="2" type="button">2GB</button>
<button class="pill" data-plan="3" type="button">3GB</button>
<button class="pill" data-plan="unl" type="button">Unlimited</button>
</div>
<div style="margin-top:10px;display:flex;gap:10px;align-items:center;flex-wrap:wrap">
<span class="sub">—ç—Å–≤—ç–ª</span>
<select class="select" id="modalPlan">
<option value="1">1GB</option>
<option value="2">2GB</option>
<option value="3">3GB</option>
<option value="unl">Unlimited</option>
</select>
</div>
</div>
<!-- Day chips + dropdown -->
<div style="margin-top:12px">
<div class="sub" style="margin-bottom:8px">–•–æ–Ω–æ–≥ —Å–æ–Ω–≥–æ—Ö</div>
<div id="dayChips" style="display:flex;gap:8px;flex-wrap:wrap">
<button class="pill" data-d="1" type="button">1</button>
<button class="pill" data-d="3" type="button">3</button>
<button class="pill" data-d="5" type="button">5</button>
<button class="pill" data-d="7" type="button">7</button>
<button class="pill" data-d="10" type="button">10</button>
<button class="pill" data-d="15" type="button">15</button>
<button class="pill" data-d="30" type="button">30</button>
</div>
<div style="margin-top:10px;display:flex;gap:10px;align-items:center;flex-wrap:wrap">
<span class="sub">—ç—Å–≤—ç–ª</span>
<select class="select" id="modalDays"></select>
</div>
</div>
<div class="actions" style="justify-content:space-between">
<div style="display:flex;gap:10px;flex-wrap:wrap">
<button class="btn primary" id="payQpay" type="button">QPay-—Ä —Ç”©–ª”©—Ö</button>
<button class="btn" id="checkPayment" type="button">–¢”©–ª–±”©—Ä —à–∞–ª–≥–∞—Ö</button>
</div>
<div style="display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end">
<button class="btn" id="cancel" type="button">–ë–æ–ª–∏—Ö</button>
<!-- –ó–∞—Ö–∏–∞–ª–∞—Ö: Messenger —Ä“Ø“Ø “Ø—Å—Ä—ç—Ö–≥“Ø–π. –°–æ–Ω–≥–æ–ª—Ç—ã–≥ —Ö—É—É–ª–∂ ”©–≥–Ω”©. -->
<button class="btn" id="order" type="button">–ó–∞—Ö–∏–∞–ª–≥—ã–Ω –º—ç–¥—ç—ç–ª—ç–ª —Ö—É—É–ª–Ω–∞</button>
</div>
</div>
<div id="qpayBox" style="margin-top:12px; display:none;"></div>
<div id="chatBtns" style="margin-top:10px; display:none; gap:10px; flex-wrap:wrap">
<a class="btn primary" id="goWhatsapp" rel="noopener" target="_blank">WhatsApp —Ä—É—É –±–∏—á–∏—Ö</a>
<a class="btn" id="goMessenger" rel="noopener" target="_blank">Facebook Page —Ä—É—É –±–∏—á–∏—Ö</a>
</div>
<div class="sub" style="margin-top:10px">
        * –î“Ø–Ω –Ω—å —Å–æ–Ω–≥–æ—Å–æ–Ω —Ö–æ–Ω–æ–≥/–¥–∞—Ç–∞–≥–∞–∞—Ä –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä —à–∏–Ω—ç—á–ª—ç–≥–¥—ç–Ω—ç.
      </div>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
    // =========================
    // CONFIG (–¥–æ—Ç–æ–æ–¥ —Ç–æ–æ—Ü–æ–æ ‚Äì —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–¥ —Ö–∞—Ä—É—É–ª–∞—Ö–≥“Ø–π)
    // =========================
    const PROFIT = 0.30;        // –∞—à–∏–≥ (UI –¥—ç—ç—Ä –±–∏—á–∏—Ö–≥“Ø–π)
    const DAILY_DISC = 0.005;   // ”©–¥”©—Ä –±“Ø—Ä 0.5% —Ö—è–º–¥—Ä–∞–ª
    const MAX_DISC = 0.15;      // max 15%

    // =========================
    
    // =========================
    // DYNAMIC DATA (Airhub plans ‚Üí auto countries)
    // USD‚ÜíMNT: 1 USD = 3566‚ÇÆ
    // Markup: China/Korea 35%, others 30%
    // =========================
    const USD_RATE = 3566;

    function calculateMNT(usd, country){
      const u = Number(usd || 0);
      const markup = (country === "China" || country === "South Korea" || country === "Korea South") ? 1.35 : 1.30;
      return Math.round((u * USD_RATE * markup) / 100) * 100; // 100‚ÇÆ rounding
    }

    // CountryName ‚Üí ISO2 (flag)
    const COUNTRY_CODE = {
      "China":"CN",
      "South Korea":"KR",
      "Korea South":"KR",
      "Japan":"JP",
      "Thailand":"TH",
      "Vietnam":"VN",
      "Malaysia":"MY",
      "Singapore":"SG",
      "Indonesia":"ID",
      "Philippines":"PH",
      "Taiwan":"TW",
      "Hong Kong":"HK",
      "Macao":"MO",
      "Macau":"MO",
      "United States":"US",
      "Canada":"CA",
      "Mexico":"MX",
      "Turkey":"TR",
      "Germany":"DE",
      "France":"FR"
    };

    function flagEmojiFromCode(code){
      if(!code || String(code).length !== 2) return "üè≥Ô∏è";
      const cc = String(code).toUpperCase();
      const A = 0x1F1E6;
      return String.fromCodePoint(A + (cc.charCodeAt(0) - 65), A + (cc.charCodeAt(1) - 65));
    }

    function flagForCountryName(countryName){
      const code = COUNTRY_CODE[countryName];
      return code ? flagEmojiFromCode(code) : "üè≥Ô∏è";
    }

    function isUnlimitedPlan(p){
      const name = String((p && p.planName) || "").toLowerCase();
      if(name.includes("unlimited")) return true;
      const cap = String((p && p.capacity) || "").toLowerCase();
      if(cap.includes("unlimited")) return true;
      return false;
    }

    function sortPlansForUI(plans){
      return (plans || []).slice().sort((a,b)=>{
        const aUn = isUnlimitedPlan(a);
        const bUn = isUnlimitedPlan(b);
        if(aUn !== bUn) return aUn ? 1 : -1; // unlimited last
        return Number(a.price) - Number(b.price);
      });
    }

    function groupByCountry(plans){
      const map = {};
      (plans || []).forEach(p=>{
        const c = p.countryName || "Unknown";
        if(!map[c]) map[c] = [];
        map[c].push(p);
      });
      return map;
    }

    // =========================
    // STATE
    // =========================
    let ALL_PLANS = [];
    let GROUPED = {};
    let currentCountry = null;
    let currentPlans = [];
    let currentPlan = null; // selected plan object

    // =========================
    // HELPERS (format)
    // =========================
    function fmt(n){
      return new Intl.NumberFormat('mn-MN').format(Number(n || 0)) + "‚ÇÆ";
    }

    function travelRequirement(p){
      const t = String((p && p.travel_date) || "").toLowerCase();
      if(t.includes("no need")) return "No Need";
      if(t.includes("need") || t.includes("required") || t.includes("mandatory")) return "Required";
      return (p && p.travel_date) ? p.travel_date : "Unknown";
    }

    // =========================
    // DOM
    // =========================
    const grid = document.getElementById("grid");
    const q = document.getElementById("q");
    const daysEl = document.getElementById("days");

    const bd = document.getElementById("bd");
    const md = document.getElementById("md");
    const ttl = document.getElementById("ttl");
    const out = document.getElementById("out");
    const orderBtn = document.getElementById("order");

    const modalDaysEl = document.getElementById("modalDays");
    const dayChips = document.getElementById("dayChips");

    const modalPlanEl = document.getElementById("modalPlan");
    const dataChips = document.getElementById("dataChips");

    // Hide legacy UI blocks (we use plan dropdown + list)
    try{
      if(modalDaysEl && modalDaysEl.parentElement) modalDaysEl.parentElement.style.display = "none";
      if(dayChips && dayChips.parentElement) dayChips.parentElement.style.display = "none";
      if(dataChips && dataChips.parentElement) dataChips.parentElement.style.display = "none";
    }catch(e){}

    // =========================
    // TOAST
    // =========================
    function showToast(msg){
      const t = document.getElementById("toast");
      if(!t) return;
      t.textContent = msg;
      t.style.display="block";
      clearTimeout(showToast._tm);
      showToast._tm = setTimeout(()=> t.style.display="none", 1400);
    }

    // =========================
    // LOAD PLANS (Netlify Function)
    // expects: { getInformation: [...] }
    // =========================
    async function loadPlans(){
      try{
        const res = await fetch("/.netlify/functions/getPlans");
        const data = await res.json();
        ALL_PLANS = data.getInformation || [];
        GROUPED = groupByCountry(ALL_PLANS);
        render();
      }catch(err){
        console.error(err);
        if(grid){
          grid.innerHTML = `<div class="card"><div class="name">–ê–ª–¥–∞–∞</div><div class="sub">Plan —Ç–∞—Ç–∞–∂ —á–∞–¥—Å–∞–Ω–≥“Ø–π. /.netlify/functions/getPlans –∞–∂–∏–ª–ª–∞–∂ –±–∞–π–≥–∞–∞ —ç—Å—ç—Ö—ç—ç —à–∞–ª–≥–∞–∞—Ä–∞–π.</div></div>`;
        }
      }
    }

    // =========================
    // RENDER (countries)
    // Uses days filter: show "From" based on selected days if available
    // =========================
    function render(){
      const query = (q && q.value ? q.value : "").trim().toLowerCase();
      const days = Number(daysEl && daysEl.value ? daysEl.value : 7) || 7;

      const countries = Object.keys(GROUPED || {}).filter(c => {
        if(!query) return true;
        return String(c).toLowerCase().includes(query);
      }).sort((a,b)=>a.localeCompare(b));

      if(!grid) return;

      grid.innerHTML = countries.map(country => {
        const plansAll = GROUPED[country] || [];
        const dayMatched = plansAll.filter(p => String(p.vaildity) === String(days));
        const candidate = (dayMatched.length ? dayMatched : plansAll);

        const normal = candidate.filter(p => !isUnlimitedPlan(p));
        const base = (normal.length ? normal : candidate);

        const minUSD = Math.min(...base.map(p => Number(p.price)));
        const minMNT = calculateMNT(minUSD, country);
        const flag = flagForCountryName(country);

        const safeCountry = String(country).replace(/'/g, "\\'");
        return `
          <div class="card">
            <div class="cardHead">
              <div>
                <div class="name">${flag} ${country}</div>
                <div class="sub">From <b>${fmt(minMNT)}</b></div>
              </div>
              <button class="btn primary" onclick="openCountry('${safeCountry}')">–ë–∞–≥—Ü —Ö–∞—Ä–∞—Ö</button>
            </div>
          </div>
        `;
      }).join('');
    }

    // =========================
    // MODAL (plans per country)
    // Unlimited goes last
    // =========================
    function openCountry(country){
      currentCountry = country;
      const plansRaw = GROUPED[country] || [];
      currentPlans = sortPlansForUI(plansRaw);

      if(modalPlanEl){
        modalPlanEl.innerHTML = currentPlans.map(p => {
          const mnt = calculateMNT(p.price, country);
          const unBadge = isUnlimitedPlan(p) ? " ‚Ä¢ Unlimited" : "";
          const cap = (p.capacity && p.capacityUnit) ? `${p.capacity}${p.capacityUnit}` : "";
          const dur = (p.vaildity && p.validityType) ? `${p.vaildity}${p.validityType}` : "";
          const meta = [cap, dur].filter(Boolean).join(" / ");
          const label = `${meta ? meta + " ‚Äî " : ""}${fmt(mnt)}${unBadge}`;
          return `<option value="${p.planCode}">${label}</option>`;
        }).join('');
      }

      currentPlan = currentPlans.find(p => !isUnlimitedPlan(p)) || currentPlans[0] || null;
      if(modalPlanEl && currentPlan) modalPlanEl.value = currentPlan.planCode;

      updateModal();

      bd.style.display="block";
      md.style.display="block";
    }

    function closeModal(){
      bd.style.display="none";
      md.style.display="none";
    }

    function updateModal(){
      if(!currentCountry) return;
      const flag = flagForCountryName(currentCountry);

      const selectedCode = modalPlanEl ? String(modalPlanEl.value || "") : "";
      currentPlan = currentPlans.find(p => String(p.planCode) === selectedCode) || currentPlan;

      ttl.textContent = `${flag} ${currentCountry} ‚Äì eSIM –±–∞–≥—Ü—É—É–¥`;

      const rows = currentPlans.map(p => {
        const mnt = calculateMNT(p.price, currentCountry);
        const selected = currentPlan && String(currentPlan.planCode) === String(p.planCode);
        const cap = (p.capacity && p.capacityUnit) ? `${p.capacity}${p.capacityUnit}` : "";
        const dur = (p.vaildity && p.validityType) ? `${p.vaildity} ${p.validityType}` : "";
        const meta = [cap, dur].filter(Boolean).join(" ‚Ä¢ ");
        const travel = travelRequirement(p);
        const un = isUnlimitedPlan(p) ? `<span class="pill" style="margin-left:8px">Unlimited</span>` : "";

        const safeCode = String(p.planCode).replace(/'/g, "\\'");
        return `
          <div style="border-bottom:1px solid #eee;padding:10px 0;${selected ? "background:#fafafa" : ""}">
            <div style="display:flex;justify-content:space-between;gap:12px;align-items:flex-start">
              <div style="min-width:0">
                <div style="font-weight:700">${p.planName}${un}</div>
                <div class="sub" style="margin-top:4px">${meta}${meta ? " ‚Ä¢ " : ""}TravelDate: ${travel}</div>
                <div style="margin-top:6px;font-size:18px"><b>${fmt(mnt)}</b></div>
              </div>
              <button class="btn" type="button" onclick="selectPlan('${safeCode}')">${selected ? "–°–æ–Ω–≥–æ—Å–æ–Ω" : "–°–æ–Ω–≥–æ—Ö"}</button>
            </div>
          </div>
        `;
      }).join("");

      out.innerHTML = rows;

      if(orderBtn){
        orderBtn.disabled = !currentPlan;
      }
    }

    function selectPlan(planCode){
      if(modalPlanEl) modalPlanEl.value = String(planCode);
      updateModal();
    }

    if(modalPlanEl){
      modalPlanEl.addEventListener("change", updateModal);
    }

    window.openCountry = openCountry;
    window.selectPlan = selectPlan;

    // =========================
    // ORDER BUTTON (copy message)
    // =========================
    if(orderBtn){
      orderBtn.addEventListener("click", async ()=>{
        if(!currentPlan || !currentCountry) return;

        const mnt = calculateMNT(currentPlan.price, currentCountry);
        const travel = travelRequirement(currentPlan);

        const msg =
`–ó–∞—Ö–∏–∞–ª–≥–∞:
–£–ª—Å: ${flagForCountryName(currentCountry)} ${currentCountry}
–ë–∞–≥—Ü: ${currentPlan.planName}
PlanCode: ${currentPlan.planCode}
–•—É–≥–∞—Ü–∞–∞: ${currentPlan.vaildity} ${currentPlan.validityType}
–î–∞—Ç–∞: ${(currentPlan.capacity || "")}${(currentPlan.capacityUnit || "")}
TravelDate: ${travel}
–î“Ø–Ω: ${fmt(mnt)}
–£—Ç–∞—Å: 90283039
Facebook: https://www.facebook.com/profile.php?id=61587287992719`;

        try{
          await navigator.clipboard.writeText(msg);
          showToast("–ó–∞—Ö–∏–∞–ª–≥—ã–Ω –º—ç–¥—ç—ç–ª—ç–ª —Ö—É—É–ª–ª–∞–∞ ‚úÖ");
        }catch(err){
          const tmp = document.createElement("textarea");
          tmp.value = msg;
          document.body.appendChild(tmp);
          tmp.select();
          document.execCommand("copy");
          tmp.remove();
          showToast("–•—É—É–ª–ª–∞–∞ ‚úÖ");
        }
      });
    }

    // Page controls
    const clearBtn = document.getElementById("clear");
    if(clearBtn){
      clearBtn.onclick = () => {
        if(q) q.value = "";
        render();
      };
    }

    if(q) q.addEventListener("input", render);
    if(daysEl) daysEl.addEventListener("change", render);

    const quickChinaBtn = document.getElementById("quickChinaBtn");
    if(quickChinaBtn){
      quickChinaBtn.addEventListener("click", ()=> openCountry("China"));
    }

    // Start
    // =========================
    // QPAY BUTTON (create invoice)
    // =========================
    let paymentInterval = null;
    const FB_PAGE_URL = "https://m.me/esimmongolia";
    const qpayBtn = document.getElementById("payQpay");
    if(qpayBtn){
      qpayBtn.addEventListener("click", async () => {
        if(!currentPlan || !currentCountry) return;

        const orderId = "AIRHUB_" + Date.now();
        const flag = flagForCountryName(currentCountry);
        const desc = `${flag} ${currentCountry} ‚Ä¢ ${currentPlan.planName} ‚Ä¢ PlanCode:${currentPlan.planCode}`;

        // Amount in MNT with markup rules
        const amount = Math.round(calculateMNT(currentPlan.price, currentCountry));

        resetPayUI();
        qpayBox.style.display = "block";
        qpayBox.innerHTML = "‚è≥ QPay –Ω—ç—Ö—ç–º–∂–ª—ç–ª “Ø“Ø—Å–≥—ç–∂ –±–∞–π–Ω–∞...";

        try{
          const res = await fetch("/.netlify/functions/qpay-create-invoice", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              orderId,
              amount,
              description: desc
            })
          });

          const data = await res.json();
          if(!res.ok) throw new Error(data.error || "QPay error");

          // Save invoice id for auto-check
          window._invoiceId = extractInvoiceId(data);
          const payUrl = extractPayUrl(data);
          const qrValue = extractQrValue(data);
          const qrImage = extractQrImage(data);

          startAutoCheck();

          const msg =
`–°–∞–π–Ω –±–∞–π–Ω–∞ —É—É üëã
–ë–∏ QPay-—Ä —Ç”©–ª–±”©—Ä”©”© —Ç”©–ª—Å”©–Ω.
Order: ${orderId}
–£–ª—Å: ${flag} ${currentCountry}
–ë–∞–≥—Ü: ${currentPlan.planName}
PlanCode: ${currentPlan.planCode}
–î“Ø–Ω: ${fmt(amount)}
Invoice: ${window._invoiceId || "-"}`;

          window._orderMsg = msg;
          goMessenger.href = FB_PAGE_URL;
          goWhatsapp.href = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`;

          // Render QR
          const qrImgHtml = qrImage
            ? `<img alt="QPay QR" src="data:image/png;base64,${qrImage}" style="max-width:320px;width:100%;height:auto;border-radius:14px;border:1px solid #e5e7eb" />`
            : "";

          const qrLinkHtml = payUrl
            ? `<div style="margin-top:10px"><a class="btn primary" href="${payUrl}" target="_blank" rel="noopener">QPay –ª–∏–Ω–∫ –Ω—ç—ç—Ö</a></div>`
            : "";

          qpayBox.innerHTML = `
            <div style="display:flex;flex-direction:column;gap:10px;align-items:center">
              ${qrImgHtml || ""}
              ${(!qrImgHtml && qrValue) ? `<div class="sub">QR (text): ${qrValue}</div>` : ""}
              ${qrLinkHtml || ""}
              <div class="sub" style="text-align:center;max-width:520px">
                –¢”©–ª–±”©—Ä –æ—Ä–º–æ–≥—Ü –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä —à–∞–ª–≥–∞–Ω–∞. –¢”©–ª—Å”©–Ω –±–æ–ª –¥–æ–æ—Ä—Ö —Ç–æ–≤—á–æ–æ—Ä ‚Äú–¢”©–ª–ª”©”©‚Äù –≥—ç–∂ –±–∏—á—ç—ç—Ä—ç–π.
              </div>
            </div>
          `;
        }catch(e){
          console.error(e);
          qpayBox.innerHTML = `<div style="border:1px solid #fee2e2;background:#fff1f2;border-radius:14px;padding:12px">
            <b>‚ùå QPay –∞–ª–¥–∞–∞</b>
            <div class="sub" style="margin-top:6px">${String(e.message || e)}</div>
          </div>`;
        }
      });
    }

    loadPlans();


    function extractPayUrl(data){
  if(!data) return "";

  if (Array.isArray(data.urls)) {
    return data.urls.find(u => u?.link)?.link || "";
  }

  if (typeof data.urls === "object") {
    return data.urls.qPay || data.urls.qpay || data.urls.link || "";
  }

  return data.qpay_url || data.payment_url || data.link || "";
}

function extractQrValue(data){
  // Prefer raw qr text / deep link that QPay apps can open.
  return (
    data?.qr_text ||
    data?.qrText ||
    data?.qr_string ||
    data?.qrString ||
    data?.qr ||
    data?.qrCode ||
    data?.qr_code ||
    // Sometimes qr text lives under "result"
    data?.result?.qr_text ||
    data?.result?.qrText ||
    data?.result?.qr_string ||
    // Fallback to any payable deep link
    extractPayUrl(data)
  );
}

function extractQrImage(data){
  // Base64 QR image (no prefix) returned by some QPay endpoints
  return (
    data?.qr_image ||
    data?.qrImage ||
    data?.qr_img ||
    data?.qrImg ||
    data?.result?.qr_image ||
    data?.result?.qrImage
  );
}

function extractInvoiceId(data){
  return (
    data?.invoice_id ||
    data?.invoiceId ||
    data?.invoiceID ||
    data?.result?.invoice_id ||
    data?.result?.invoiceId ||
    data?.data?.invoice_id ||
    data?.data?.invoiceId ||
    data?.invoice?.id ||
    data?.invoice?.invoice_id ||
    null
  );
}


function startAutoCheck(){
  if(!window._invoiceId) return;

  if(paymentInterval){
    clearInterval(paymentInterval);
  }

  paymentInterval = setInterval(async () => {
    try{
      const res = await fetch("/.netlify/functions/qpay-check", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ invoice_id: window._invoiceId })
      });

      const data = await res.json();
      if(!res.ok) return;

      if(data.paid){
        clearInterval(paymentInterval);
        paymentInterval = null;

        chatBtns.style.display = "flex";
        qpayBox.innerHTML = `
          <div style="border:1px solid #e5e7eb;border-radius:14px;padding:12px">
            <b style="color:green">‚úÖ –¢”©–ª–±”©—Ä –∞–º–∂–∏–ª—Ç—Ç–∞–π</b>
            <div class="sub" style="margin-top:8px">
              WhatsApp —ç—Å–≤—ç–ª Facebook Page-—Ä ‚Äú–¢”©–ª–ª”©”©‚Äù –≥—ç–∂ –±–∏—á–Ω—ç “Ø“Ø.
            </div>
          </div>
        `;
      }

    }catch(e){
      console.error("Auto check error:", e);
    }
  }, 5000); // 20 —Å–µ–∫—É–Ω–¥ —Ç—É—Ç–∞–º —à–∞–ª–≥–∞–Ω–∞
}

function resetPayUI(){
  qpayBox.innerHTML = "";
  qpayBox.style.display = "none";     // ‚úÖ –Ω—ç–º
  chatBtns.style.display = "none";
  window._invoiceId = null;
  window._orderMsg = null;
}

qpayBtn.addEventListener("click", async () => {

  if(!currentItem) return;

  const days = Number(modalDaysEl.value) || 7;
  const plan = String(modalPlanEl.value || currentPlan || "1");
  const basePerDay = baseForPlan(currentItem, plan);
  const r = calc(basePerDay, days);

  const orderId = "ESIM_" + Date.now();
  const desc = `${itemFlag(currentItem)} ${currentItem.name} ‚Ä¢ ${planLabel(plan)} ‚Ä¢ ${days} ”©–¥”©—Ä`;

  resetPayUI();
qpayBox.style.display = "block";      // ‚úÖ –Ω—ç–º
qpayBox.innerHTML = "‚è≥ QPay –Ω—ç—Ö—ç–º–∂–ª—ç–ª “Ø“Ø—Å–≥—ç–∂ –±–∞–π–Ω–∞...";


  try{
    const res = await fetch("/.netlify/functions/qpay-create-invoice", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        orderId,
        amount: Math.round(r.sell),
        description: desc
      })
    });

    const data = await res.json();
    if(!res.ok) throw new Error(data.error || "QPay error");

   const payUrl = extractPayUrl(data);
const qrValue = extractQrValue(data);   // üî• –ñ–ò–ù–•–≠–ù–≠ QR TEXT
const qrImage = extractQrImage(data);   // üî• –•—ç—Ä—ç–≤ base64 image –∏—Ä–≤—ç–ª


    
    startAutoCheck();
const msg =
`–°–∞–π–Ω –±–∞–π–Ω–∞ —É—É üëã
–ë–∏ QPay-—Ä —Ç”©–ª–±”©—Ä”©”© —Ç”©–ª—Å”©–Ω.
Order: ${orderId}
–ë–∞–≥—Ü: ${desc}
–î“Ø–Ω: ${fmt(r.sell)}
Invoice: ${window._invoiceId || "-"}`;

    window._orderMsg = msg;

    goMessenger.href = FB_PAGE_URL;
    goWhatsapp.href = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`;

    qpayBox.innerHTML = `
      <div style="
        display:flex;
        justify-content:center;
        align-items:center;
        padding:14px;
        background:#fff;
        border-radius:16px;
      ">
        <div id="qpayQr"></div>
      </div>
    `;

    const qrDiv = document.getElementById("qpayQr");
    if(qrImage){
      // Render base64 PNG QR image if provided
      const img = document.createElement("img");
      img.alt = "QPay QR";
      img.style.width = "360px";
      img.style.height = "360px";
      img.src = String(qrImage).startsWith("data:")
        ? String(qrImage)
        : `data:image/png;base64,${String(qrImage)}`;
      qrDiv.innerHTML = "";
      qrDiv.appendChild(img);
    }else if(qrValue){
      // Generate QR from text / deep link
      qrDiv.innerHTML = "";
      new QRCode(qrDiv, {
        text: String(qrValue),
        width: 360,
        height: 360
      });
        if(payUrl){
  qpayBox.insertAdjacentHTML("beforeend", `
    <div style="margin-top:12px;text-align:center">
      <a class="btn primary" href="${payUrl}" target="_blank">
        QPay –Ω—ç—ç–∂ —Ç”©–ª”©—Ö
      </a>
      <div class="sub" style="margin-top:6px">
        QR —É–Ω—à–∏—Ö–≥“Ø–π–≥—ç—ç—Ä —à—É—É–¥ QPay-—Ä –Ω—ç—ç–∂ —Ç”©–ª–∂ –±–æ–ª–Ω–æ.
      </div>
    </div>
  `);
}

    }else{
      qrDiv.innerHTML = "<div class='sub'>‚ö†Ô∏è QR –º—ç–¥—ç—ç–ª—ç–ª –∏—Ä—Å—ç–Ω–≥“Ø–π. –î–æ–æ—Ä—Ö 'QPay –Ω—ç—ç–∂ —Ç”©–ª”©—Ö' –ª–∏–Ω–∫—ç—ç—Ä —Ç”©–ª–∂ –±–æ–ª–Ω–æ.</div>";
    }

  }catch(e){
    const msg = (e && e.message) ? e.message : String(e);
    qpayBox.innerHTML = `‚ùå QPay –Ω—ç—Ö—ç–º–∂–ª—ç–ª “Ø“Ø—Å–≥—ç—Ö—ç–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞.<div class="sub" style="margin-top:6px">–î—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π: <b>${msg}</b></div>`;
    console.error("QPay create invoice error:", e);
  }
});

checkBtn.addEventListener("click", async () => {

  if(!window._invoiceId){
    alert("–≠—Ö–ª—ç—ç–¥ QPay-—Ä —Ç”©–ª”©—Ö –¥—ç—ç—Ä –¥–∞—Ä–Ω–∞ —É—É.");
    return;
  }

  qpayBox.innerHTML = "‚è≥ –¢”©–ª–±”©—Ä —à–∞–ª–≥–∞–∂ –±–∞–π–Ω–∞...";

  try{
    const res = await fetch("/.netlify/functions/qpay-check", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ invoice_id: window._invoiceId })
    });

    const data = await res.json();
    if(!res.ok) throw new Error();

    if(data.paid){
      chatBtns.style.display = "flex";
      qpayBox.innerHTML = `
        <div style="border:1px solid #e5e7eb;border-radius:14px;padding:12px">
          <b>‚úÖ –¢”©–ª–±”©—Ä –∞–º–∂–∏–ª—Ç—Ç–∞–π</b>
          <div class="sub" style="margin-top:8px">
            WhatsApp —ç—Å–≤—ç–ª Facebook Page-—Ä ‚Äú–¢”©–ª–ª”©”©‚Äù –≥—ç–∂ –±–∏—á–Ω—ç “Ø“Ø.
          </div>
        </div>
      `;
    }else{
      qpayBox.innerHTML = `
        <div style="border:1px solid #e5e7eb;border-radius:14px;padding:12px">
          <b>‚è≥ –¢”©–ª–±”©—Ä —Ö–∞—Ä–∞–∞—Ö–∞–Ω –æ—Ä–æ–æ–≥“Ø–π</b>
        </div>
      `;
    }

  }catch(e){
    qpayBox.innerHTML = "‚ùå –¢”©–ª–±”©—Ä —à–∞–ª–≥–∞—Ö–∞–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞.";
  }
});

    render();
</script>
    <section style="padding:60px 20px;text-align:center;background:#f6f7fb;">
<h2 style="color:#1b0981;">–ú–∞–Ω–∞–π –∞—è–ª–ª—ã–Ω “Ø–π–ª—á–∏–ª–≥—ç—ç</h2>

<div style="display:flex;gap:20px;justify-content:center;flex-wrap:wrap;margin-top:30px;">

<a href="flights.html" style="text-decoration:none;">
<div style="background:white;padding:30px;border-radius:15px;width:250px;box-shadow:0 10px 40px rgba(0,0,0,0.08);">
<h3>‚úàÔ∏è –ù–∏—Å–ª—ç–≥ –∑–∞—Ö–∏–∞–ª–∞—Ö</h3>
<p>–•—è–º–¥ –Ω–∏—Å–ª—ç–≥ —Ö–∞–π–∂ —à—É—É–¥ –∑–∞—Ö–∏–∞–ª–∞—Ö</p>
</div>
</a>

<a href="hotels.html" style="text-decoration:none;">
<div style="background:white;padding:30px;border-radius:15px;width:250px;box-shadow:0 10px 40px rgba(0,0,0,0.08);">
<h3>üè® –ë—É—É–¥–∞–ª –∑–∞—Ö–∏–∞–ª–∞—Ö</h3>
<p>Booking.com-–æ–æ—Ä –±—É—É–¥–∞–ª —Ö–∞–π—Ö</p>
</div>
</a>

</div>
</section>
</body>
</html>

